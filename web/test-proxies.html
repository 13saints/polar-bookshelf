<html>

<head>
</head>
<body>

<script type="module">

    import {Proxies} from "./js/Proxies.js";

    var myDict = {'foo': 'bar'};

    class MyListener {

        onMutation(mutationType, target, property, value) {
            // in practice we would write this to a journaled log file.
            console.log("Got mutation: ", {mutationType, target, property, value});
            return true;
        }

    }

    var myListener = new MyListener();

    myDict = Proxies.create(myDict).forMutations(myListener);

    myDict.animal = 'frog';

    delete myDict.animal;

    class MyObject {

        constructor() {
            this.animal = "lion";
        }

    }

    var myObject = new MyObject();
    myObject = Proxies.create(myObject).forMutations(myListener);

    myObject.animal = 'frog';

    delete myObject.animal;




                                         // myListener.onSet.bind(myListener),
                                         // myListener.onDelete.bind(myListener))
    //
    // console.log(myDict);
    //
    // // myDict['cat'] = '
    // dog';
    // //

    // var obj = JSON.parse("{\"foo\": \"bar\"}");
    //
    // Object.assign(myDict, obj);

</script>


</body>
</html>
